<?xml version="1.0" encoding="UTF-8"?> 
 
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
 
 
<mapper namespace="persistencia.mappers.UsuarioMapper">
	
	<resultMap type="usuario" id="rmUsuario">
		<result column="CODIGO" jdbcType="VARCHAR" property="codigo"/>
		<result column="CLAVE" jdbcType="VARCHAR" property="clave"/>
		<result column="FECHA_INGRESO" jdbcType="DATE" property="fecha_ingreso"/>
		
		<association property="estado" javaType="estado">
            <result column="DESCRIPCION" property="descripcion"/>
        </association>
        
        <association property="tipo_usuario" javaType="tipo_usuario">
            <result column="DESCRIPCION" property="descripcion"/>
        </association> 
	
	</resultMap>

	 
	<select id="buscarUsuario" parameterType="usuario" resultMap="rmUsuario"> 
		SELECT CODIGO, CLAVE, FECHA_INGRESO, E.DESCRIPCION, TU.DESCRIPCION
		FROM USUARIO U
		INNER JOIN ESTADO E
		ON U.ESTADO = E.ID
		INNER JOIN TIPO_USUARIO TU
		ON U.TIPO_USUARIO = TU.ID
		WHERE CODIGO=#{codigo} AND CLAVE = #{clave}
	</select>
 
</mapper> 